##题目

[King Arthur's Birthday Celebration](http://poj.org/problem?id=3682)

##分析

也是一个进入点，一个出口

E(i)：表示抛出正面的次数为i的情况下，再需要多少步能够到达出口，即抛出的正面数为k，而出口一般的步数为0，这里有E(k) = 0

`E(i) = (1-p)*(E(i)+1) + p*(E(i+1)+1)`，因为有1-p的概率还是在原地，但是多走了一步，有p的概率走到下一步，但也多走了一步

规律：设E(i)表示当前位置到达出口所需要的步数，E(exit) = 0，而有`E(i) = p1*E(n1) + p2 * E(n2) + …+ pk * E(nk)`

F(i) 表示从当前位置到达出口所耗费的金币数，相当于从第1天开始所耗费的金币数

`F(i) = (1-p) * (F(i) + 2* E(i)+1) + p * (F(i+1) + 2 * E(i+1)+1)`，从i点回到i点的概率为1-p，从i点到达出口平均的步数为E(i)，而现在多消耗了一天在i上（有了一个循环），所以平均步数变成了E(i)+1天，所以就比原来消耗的金币数多了`2*(E(i)+1)-1 =  2* E(i)+1`，同理对于i+1结点

我们这里假设的是正面为i就开始位置，并不需要考虑从0到i所花费的平均天数，我们是一步步的假设i是第一天，i-1是第一天，i-2是第一天，最后到0是第一天，到了最后0确实是第一天的。从F(i)右侧的等式可以知道虽然我们当前把i当成了第一天，但是下一次递推F(i-1)的时候F(i)就不是第一天了，因为`F(i) = (1-p) * (F(i) + 2* E(i)+1) + p * (F(i+1) + 2 * E(i+1)+1)`中推F(i)时已经把F(i+1)不当成第一天了，因为又加了一天了，所以要加上`2 * E(i+1)+1`。这里的思想就是先把k作为第一天，然后在k的基础上加上花费把k-1作为第一天，以此类推，一直到0是第一天，这个就是准确的了。


有概率有步数就是期望问题
